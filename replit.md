# Harbor Freight Landing Page

## Описание проекта
Мобильный лендинг-опросник для программы лояльности Harbor Freight. Пользователь проходит опрос из 8 вопросов с возможностью выиграть приз (Loffertitle - набор инструментов ICON).

## Технологии
- **HTML5** - структура страницы
- **CSS3** - стили и анимации
- **Vanilla JavaScript** - логика и интерактивность
- Без фреймворков и внешних зависимостей

## Основные функции

### ✅ Реализовано
1. **Одностраничное приложение** - все переходы без редиректов
2. **Рабочий таймер обратного отсчета** - обновляется каждую секунду
3. **Цветовая схема** - неяркий красный #C84444 (по требованию пользователя)
4. **Увеличенный логотип Harbor Freight** - с синей подчеркивающей полосой
5. **Динамическая дата** - баннер автоматически отображает сегодняшнюю дату на английском
6. **8 вопросов опроса** - с плавными fade-анимациями переходов
7. **Улучшенная анимация переходов** - fade-out старого вопроса и fade-in нового
8. **Визуальные placeholders** - для изображений продукта (легко заменяемые)
9. **Анимация проверки** - "We are verifying..." со спиннером (2.5 сек)
10. **Валидация ответов** - постепенное появление 3 строк с зелеными галочками
11. **Модальное окно победителя** - с конфетти-анимацией и placeholder изображения
12. **Prefill-экран** - форма оформления заказа с автозаполнением из Keitaro параметров
13. **Интеграция с Keitaro** - чтение параметров из URL и отправка на Offer
14. **Адаптивная верстка** - оптимизировано для мобильных устройств (до 480px)

## Структура файлов
```
/
├── index.html      # Главная страница
├── style.css       # Все стили
├── script.js       # Вся логика
└── images/         # Папка для изображений (опционально)
```

## Как использовать

### Для локального просмотра
1. Откройте `index.html` в браузере
2. Или запустите локальный сервер: `python -m http.server 5000`

### Для загрузки в Keitaro
1. Упакуйте все файлы в ZIP-архив:
   - index.html
   - style.css
   - script.js
   - images/ (если добавили изображения)
2. Загрузите ZIP в Keitaro

## Предпочтения пользователя
- Использовать только чистый HTML/CSS/JS без фреймворков
- Неяркий красный цвет (#C84444) вместо розового
- Одна страница без редиректов (кроме финальной кнопки OK)
- Готовность для загрузки в Keitaro

## Последние изменения
- **06.10.2025 (обновление 5)** - Финальные улучшения и оптимизация:
  - Убраны конфетти при переходе к prefill-экрану (больше не отвлекают)
  - Изменена валидация телефона: минимум 5 цифр (вместо 10)
  - Кнопка CONTINUE теперь красная #C84444 (вместо розового градиента)
  - Оптимизированы все изображения: сжатие с 3.3MB до 1.1MB (↓67%)
  - Ускорена загрузка лендинга в 3 раза благодаря оптимизации картинок
- **06.10.2025 (обновление 4)** - Добавлен prefill-экран для интеграции с Keitaro:
  - Создана полная форма оформления заказа (checkout) точно по дизайну Figma
  - Реализовано автоматическое чтение параметров из URL (sub9-sub15, sub6, sub4)
  - Добавлена санитизация входных данных для защиты от XSS-атак
  - Автоматический префилл всех полей формы параметрами из Keitaro
  - Таймер резервирования корзины (3:27 обратный отсчет) в красном баннере
  - Сворачиваемый блок Order Summary с изображением продукта
  - 3-шаговый прогресс (DELIVERY → PAYMENT → RECEIVE THE PRIZE)
  - Форма с 8 полями: Email, First Name, Last Name, Address, ZIP, State, City, Phone
  - Валидация email (regex) и телефона (минимум 10 цифр)
  - Розовая кнопка CONTINUE с градиентом (#D946B4 → #C84497)
  - Кнопка OK в модальном окне теперь открывает prefill вместо google.com
  - Редирект на /offer с передачей всех параметров Keitaro
  - Футер с зелеными бейджами "TRUSTED STORE" и "SECURE PAYMENT"
- **06.10.2025 (обновление 3)** - Финальные улучшения:
  - Добавлено реальное изображение DeWalt toolset (сохранено локально в images/)
  - Возвращен блок прогресса "1/8 Completed Answers" на экран квиза (динамически обновляется)
  - Добавлено popup-уведомление о победителе в правом верхнем углу (появляется через 10 секунд)
  - Встроен живой таймер обратного отсчета в текст на странице победителя (от 1:56 до 0:00)
  - Добавлены реальные логотипы платежных систем Visa, Mastercard, Maestro
- **06.10.2025 (обновление 2)** - Улучшения дизайна:
  - Увеличен логотип Harbor Freight и добавлена синяя полоса под ним
  - Заменены текстовые placeholders на визуальные SVG-иконки
  - Добавлена динамическая дата в баннере (автоматически сегодняшний день)
  - Убран блок прогресса из экрана вопросов для более чистого дизайна
  - Улучшена анимация переходов между вопросами (fade-out/fade-in)
  - Добавлен визуальный placeholder в модальное окно победителя
- **06.10.2025 (первая версия)** - Создан полный лендинг с таймером, опросом, анимациями и конфетти

## Параметры Keitaro

### Входящие параметры (читаются из URL):
- `sub9` → First Name (имя)
- `sub10` → Last Name (фамилия)
- `sub11` → Email
- `sub12` → Phone (телефон)
- `sub13` → Address (адрес)
- `sub14` → ZIP (индекс)
- `sub15` → City (город)
- `sub6` → Product Title (название продукта, например "Loffertitle")
- `sub4` → FB Pixel

### Исходящие параметры (отправляются на /offer):
- Все параметры формы передаются обратно в том же формате (sub9-sub15, sub6, sub4)
- Сохраняются все дополнительные параметры из исходного URL
- Редирект: `window.location.origin + '/offer?' + parameters`

### Безопасность:
- Все входящие параметры санитизируются через DOM API для защиты от XSS
- Валидация email по regex: `/^[^\s@]+@[^\s@]+\.[^\s@]+$/`
- Валидация телефона: минимум 5 цифр после удаления нецифровых символов

## Примечания
- Изображения уже добавлены в папку `images/`:
  - `icon-toolset.png` - изображение DeWalt набора инструментов на главной странице
  - `icon-toolset-small.png` - изображение для модального окна победителя
  - `visa.jpg`, `mastercard.jpg`, `maestro.jpg` - логотипы платежных систем
- Таймер на главной странице: 4 часа 21 минута от текущего времени
- Таймер на странице победителя: обратный отсчет от 1 минуты 56 секунд
- Таймер резервирования корзины на prefill: 3 минуты 27 секунд обратный отсчет
- Popup-уведомление о победителе появляется через 10 секунд после загрузки страницы
- Дата в баннере обновляется автоматически при загрузке страницы
- Прогресс квиза начинается с "0/8 Completed Answers" и обновляется до "8/8" при ответах
- Popup-уведомление о победителе использует миниатюру продукта DeWalt вместо иконки
- Все анимации оптимизированы для плавной работы на мобильных устройствах
- Переходы между вопросами используют fade-эффекты (300ms)
- Order Summary на prefill-экране сворачивается/разворачивается по клику
